<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Inconsolata&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../styles/dom-main.css">
  <title>JavaScript Essential Training - DOM Manipulation | LinkedIn</title>
</head>
<header>
  <h2>JavaScript Essential Training | LinkedIn</h2>
</header>
<body>
  <main>
    <h1>DOM Manipulation</h1>
    <article>
      <section>
        <h3>The Browser</h3>
        <p>The Web browser is an <strong>object</strong> and the <em>document</em> it displays is an object too.</p>
        <p>We have the <strong>BOM</strong>, that is the <em>Browser Object Model</em> and we also have the <strong>DOM</strong>, that is, the <em>Document Object Model</em>.</p>
        <p>The BOM is the set of objects of the browser, the browser window, it's buttons, the address bar, etc.<br>The DOM is the model of the document, with each of it's tags and nodes.</p>
        <p>Some examples of the BOM:</p>

        <code><pre>

  window.innerWidth
        </pre></code>

        <span>The code will show the browser's window width.</span>

        <code><pre>

  window.open()
        </pre></code>

        <code><pre>

  window.open('https://google.github.io/styleguide/htmlcssguide.html')
        </pre></code>

        <span>It's a BOM method for opening a new tab.</span>
        <p>The visual representation:</p>
        <figure>
          <img src="../img/bom-dom.jpg" alt="Visual representation of the BOM and the DOM">
          <figcaption>The visual representation of the objects - LinkedIn <a href="https://www.linkedin.com/learning/javascript-essential-training-3">Javascript Essential Training</a></figcaption>
        </figure>
        <p>Some DOM properties:</p>

        <code><pre>

  document.body;  // The body element
  document.title;  // The document title
  document.URL  // The document URL
        </pre></code>

      </section>

      <section>
        <h3>Target Elements in the DOM with Query selectors</h3>
        <p>Selection methods like:</p>
          <ul>
            <li><code>document.getElementById('elementId');</code></li>
            <li><code>document.getElementsByClassName('elementClass');</code></li>
            <li><code>document.getElementsByTagName('HTML tag');</code></li>
          </ul>
        <p>are still used and they are very useful, but they are very specific.
        Using selectors like class and tag name will return a <strong>node list</strong> or an <strong>HTML collection.</strong></p>
        <p>More recently they introduced the <em>Query Selector methods</em> for a more general purpose way to give us the power to get what we want in a simpler way.</p>
        <p>Examples:</p>

        <code><pre>

  document.querySelector('.main-nav a');  // returns the first instance that matches
  document.querySelctorAll('.post p'); // returns a node list of the elements that matches
  document.querySelectorAll('section p:first-of-type'); // returns a node list of every p that is the first of type of a section.
        </pre></code>

        <p class="test-one">Place this paragraph inside a variable and change it's color to green. Select it on the console using: <code>document.querySelector('.test-one');</code>. Then change it's color using <code>variableName.style.color = 'green';</code>.</p>
        <p>Now, let's change the color of all the list elements of the list below:</p>
        <ul>
          <li class="list-item">First item</li>
          <li class="list-item">Second item</li>
          <li class="list-item">Third item</li>
        </ul>
        <p>Each list item of the list above have the class <code>list-item</code>, use querySelectorAll to get the items. Remember to use '.className' to get the class and that it will return a node list.<br> After you get the elements, use an forEach <code>items.forEach(item => { item.style.color = 'blue' });</code> to change the color of all of the list items.</p>

        <p>For some more practice, lets put all the <em>first paragraphs</em> of all <em>sections</em> in a variable and change their background color to 'LightSlateGray'.</p>
        <p>Follow these instructions:</p>

        <code><pre>

  // Select the paragraphs with:
  document.querySelectorAll('section p:first-of-type');
  // Put the node list in a variable.
  // Now use a for each to change their background color to 'LightSlateGray'.
        </pre></code>
      </section>

      <section>
        <p>If you did it right, this background is now LightSlateGray!</p>
      </section>

      <section>
        <h3>Access and change elements</h3>
        <p>Now, let's take a look at some ways to change the elements inside a document.</p>
        <p>Be sure to check the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element" target="_blank">Mozilla's reference for Element methods</a>.</p>
        <p class="par-change">Let's get this paragraph text on the console. This paragraph has a class of 'change-par'. Select it using document.querySelector and add .innerHTML to see what the console will return.</p>
        <p>If you want to check every part of the element, including it's tags, then use ,outerHTML at the end of the query selection.</p>
        <p>Now, let's change the content of the paragraph below:</p>
        <p class="ask-change">Hey! Change me!</p>

        <code><pre>

  document.querySelector('.ask-change').innerHTML = 'Im changed!'
        </pre></code>

        <p>To do this, we will simply change the contents of the inner HTML using the code above.</p>
        <p>You can also change all it's contents using <code>.outerHTML</code> but in this case you will also need to add the tags (like &lt;p&gt;) and you can also add attributes and classes if you want.</p>

        <h4>Get the element's class</h4>
        <p id='weirdpar' class="bold big">Now we will get this paragraph <em>classes</em>. As you can see, this paragraph's text is bolded and it's size is huge. That's because it's using two classes that do this. We will change this paragraph to make it look right.</p>
        <p>Let's see two ways to get the classes of the paragraph and how to change them:</p>

        <code><pre>

  // Let's grab it using it's id: weirdpar
  /* Then we add the element method .className to see the classes.
  notice that by doing this the return will be a string with all the class names. */

  document.querySelector('#weirdpar').classNames

  /* The other way to get the class names is to use .classList but in this case you
  will get an array with a class list.*/

  /* To 'fix' the paragraph above we will remove the classes of the paragraph. Try this:*/
  document.querySelector('#id').classList // To get the class names as an array
  document.querySelector('#id').classList.remove('class1', 'class2', 'classN') // To remove.
        </pre></code>

        <h4>Change classes</h4>
        <p>The <code>.classList</code> is a <em>read-only</em> element. To use it's methods we need to add them like <code>element.classList.toggle('className');</code>.</p>
        <p>The methods we can use are <code>add</code>, <code>remove</code>, <code>item</code>, <code>toggle</code>, <code>contains</code> and <code>replace</code>.</p>
        <p>Be sure to check the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/classList" target="_blank">MDN classList reference</a>.</p>
        <p class="text-red">Try to remove the color of this paragraph. Select it by it's class <code>'.text-red'</code> and then use <code>classList.toggle('text-red');</code>.
        <p>You can bring the color back if you run the same code again, but <em>only if you put the paragraph inside a variable before</em>. If you don't this first, the second time you try, the DOM will have no clue on how to find the class <code>text-red</code> because it was removed.</p>
        <p>Try to use the other classList methods. Use classes like:</p>
        <ul>
          <li class="back-aquamarine bold">Im ugly, use <code>classList[num] to check my classes and remove some</code></li>
          <li>back-lightblue</li>
          <li>back-aquamarine</li>
          <li>text-lightblue</li>
          <li>text-aquamarine</li>
        </ul>
        <p>Remember that you can check an item for it's classes using <code>classList.contains('className');</code></p>

        <h4>Element attributes</h4>
        <p>Element attributes are values that usually can be seen in pairs like <code>&lt;a href="something.com"&gt;</code>.</p>
        <p>To work with element attributes we can use some methods like <code>element.hasAttribute()</code>, <code>element.getAttribute()</code>, <code>element.setAttribute()</code> and <code>element.removeAttribute()</code>.</p>
        <!-- DO NOT ADD TARGET="_BLANK" on the link below. -->
        <p>There are many more methods for attributes, be sure to check <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/attributes" id="datalink">MDN Element Attribute Methods</a> to learn how to work with them.</p>
        <p>The link above will open on another page. This is something that we do with <code>target="blank"</code> inside the <code>a</code> tag, but, in this case we used a JavaScript code to accomplish this by using the element methods. Check the file <strong>dom-methods.js</strong> to see how it was done.</p>

        <h4>Adding DOM elements</h4>
        <p>We can use JavaScript to add DOM elements. There are some steps we need to take to make sure we add it in the correct way:</p>
        <ol>
          <li>Create the element</li>
          <li>Create the text node that goes inside the element</li>
          <li>Add the text node to the element</li>
          <li>Add the element to the DOM tree</li>
        </ol>
        <p>Check the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document" target="_blank">MDN Document element methods</a> and look for the most used methods like:</p>

        <ul>
          <li><code>document.createElement()</code> creates a new element</li>
          <li><code>document.createDocumentFragment()</code> great for a better page performance</li>
          <li><code>ParentNode.append()</code> inserts the element that you want after the last child of the parent node</li>
          <li><code>ParentNode.prepend()</code> inserts the element that you want before the first child of the parent node</li>
          <li><code>Documentâ€‹.createâ€‹Textâ€‹Node()</code> while you can just set the element's text without the use of this method, it is useful if you have some texts that can be used more than once. You can place them in a variable and add them using this method. If you want to only apply a text to one element, after creating it, use <code>element.textContent</code></li>
        </ul>

        <p>Let's see the power of these methods in action!</p>
        <p>First we will add a figcaption to the image below:</p>
        <figure class="main-fig">
          <img src="../img/astronomy-earth-lunar-surface-87009.jpg" alt="Earth's view from the moon | Photo by Pixabay from Pexels">
          <!-- DO NOT ADD A FIGCAPTION -->
        </figure>
        <p>Open you console and run the code: <code>addCaption(figure1);</code></p>
        <p>If you did the step above, now you can see the figcaption above. To display the code for this figcaption, run the code: <code>renderAddCaption(codefigure);</code>. The code used for the function will be displayed below.
        </p>
        <p class="renderfigcode"></p>

      </section>

      <section id="perfTests">
        <h4>Some more tests, including performance</h4>
        <p><em>We will add 1000 paragraphs below!</em></p>

        <p>We will do this in three diferent ways and we will also display the time elapsed for each one to complete the task. This way you can see the performance diffence they have and also what difference does it make in the DOM tree.</p>

        <p>Before executing the tests, understand the differences of each one:</p>

        <p><strong>Test One:</strong> This test will add 1000 paragraphs to the DOM. How? It will use a loop to create each paragraph, add a class to it, add it's text, and then, it will render the paragraphs in the document, one by one. This is a very costly proccess because it will ask the browser to do <strong>1000 reflows</strong>.</p>

        <p><strong>Test Two:</strong> This test will add 1000 paragraphs to the DOM. How? First,this code will create a new <code>&lt;div&gt;</code>, but will not add it to the page. Then it will use a loop to create each paragraph, add a class to it, add it's text, and then, <em>it will add all the paragraphs to the <code>&lt;div&gt;</code>.</em> This way, we will have the same result, but, there will be only <strong>one reflow</strong>, that's when the new <code>&lt;div&gt;</code> will be draw on the page, but this div already have the 1000 pagaraphs. The <em>downside</em> is it that we will have a <code>&lt;div&gt;</code> that we don't need after all.</p>
        <p><p><strong>Test Three:</strong> This test will add 1000 paragraphs to the DOM. The main difference is that this test is going to be almost as fast as the <em>test two, but will not add an unecessary</em> <code>&lt;div&gt;</code> <em>to the page!</em> How?  This time we will use a the <code>.createDocumentFragment()</code> method and append all the 1000 paragraphs inside the <strong>Document Fragment</strong>, then we will add the fragment to the page. This will not add any new div, only the 1000 paragraphs, but with only one reflow, because the fragment by itself is available only in the browser memory.</p>

        <p>To understand more about the browser reflow, check <a href="https://developers.google.com/speed/docs/insights/browser-reflow" target="_blank">Minimizing browser reflow</a> from Google's PageSpeed Insights.</p>

        <p>More about the <code>.DocumentFragment()</code> on <a href="https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment" target="_blank">MDN Document Fragment</a>.</p>

        <p>Tests where done using <code>performance.now()</code>, more about it on <a href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/now" target="_blank">MDN performance.now()</a>.</p>

        <p>Now, let's run the tests!</p>
        <p><strong>Note:</strong> You can see the code on <a href="dom-tests.js" target="_blank">dom-tests.js</a>. The <strong>reset</strong> button will not reset the times, only the paragraphs, feel free to use it.</p>

        <div id="dom-test">
          <button id="test-one-btn">Test One</button>
          <button id="test-two-btn">Test Two</button>
          <button id="test-three-btn">Test Three</button>
          <button id="test-reset-btn">Reset!</button>
          <p>Array list:</p>
          <p id="perf-display-one">First test: </p>
          <p id="perf-display-two">Second test: </p>
          <p id="perf-display-three">Third test: </p>
        </div>

      </section>

      <section>
        <h4>Apply inline CSS to an element</h4>
        <p>Actually that is something we already did before on the sections above. Remember when you typed <code>element.style.color = 'blue'</code> that's a way to apply inline CSS to an element.</p>
        <p>There are many types of CSS styles that you can add to an element. Check the <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style" target="_blank">MDN Element style guide</a> to learn about the methods.
        </p>
        <p>You can also see the CSS style you can apply to an element by using the <code>.style()</code> code after selecting an element.
        </p>
        <p id="another-par">Select this paragraph that has the <em>id</em> <code>another-par</code> and use <code>.style</code> to check the available styles. Then apply the following code: <code>4px 4px 5px 1px rgba(54,54,54,1);</code> to it's box shadow style.
        </p>
        <p>You can also change the style of the element using the <code>setAttribute</code> method, but this will replace any inline style that was applied previously.</p>
        <p>Example: <code>document.querySelector('#another-par').setAttribute('style', 'padding: 2.5rem;');</code>.</p>
        <p><strong>Note:</strong> Applying styles in this way have some downsides. First, if you need to apply the same style to different elements, this can be a very tiresome proccess. Second, it's recommended that you only apply styles in this way if you really need to since Web standards wants to avoid inline styles. It is best to create the classes that you need and just add or remove the classes with JavaScript.</p>
      </section>

      <section>
        <h3>DOM Events</h3>

        <p>DOM Events happen all the time. The Browser watches for every kind of event that may happen like: mouse click, mouse move, resizing the window, pressing a button, scrolling the page, etc.</p>

        <figure>
          <img src="../img/dom-events.jpg" alt="Dom events">
          <figcaption>Dom Events by LinkedIn <a href="https://www.linkedin.com/learning/javascript-essential-training-3">JavaScript Essential Training</a>.</figcaption>
        </figure>

        <p>We can use the browser events to give interactivity to our pages or apps. We use the <em>event listeners</em> for events and then we apply our code to respond to these events.</p>
        <p>We have browser-level events and DOM-level events.</p>

        <p>Browser-level events:</p>

        <ul>
          <li>load</li>
          <li>error</li>
          <li>scroll</li>
          <li>window resize</li>
          <li>etc...</li>
        </ul>

        <p>DOM-level events:</p>

        <ul>
          <li>click</li>
          <li>focus</li>
          <li>blur</li>
          <li>submit</li>
          <li>etc...</li>
          <span>CSS Transition Events</span>
          <ul>
            <li>start</li>
            <li>run</li>
            <li>end</li>
          </ul>
        </ul>

        <p>There is a big list of events available, you can learn more at <a href="https://developer.mozilla.org/en-US/docs/Web/Events" target="_blank">MDN Events</a>.</p>

        <p>We already have event listeners around here. The buttons on the previous section have event listeners to run the different performance tests.</p>

        <p>Here we will have a very annoying event. We will use a <code>click</code> event to ask the browser to open an annoying dialog box asking for your name. If you provide it, you will see it displayed below.</p>
        <button class="user-btn">Click me!</button>
        <p class="user-name"></p>

        <p>The code created for this function is:</p>

        <code><pre>
  const displayUserName = () => {
    let message = prompt(`Hello! What's your name?`);
    const displayNamePar = document.querySelector('.user-name');
    if (message === '' || message === null) {
      displayNamePar.textContent = `Hello, user! Sorry about the annoying prompt window ðŸ¹`;
    } else {
      displayNamePar.textContent = `Hello, ${message}! Sorry about the annoying prompt window ðŸ¹`;
    }
  }
  userBtn.addEventListener('click', displayUserName, false);
  userBtn.addEventListener('click', () => { console.log(`The button was clicked!`)});
        </pre></code>

        <p>The <code>if</code> is used to display <em>user</em> if you don't type your name. The <code>userBtn</code> is the name of the variable for the button. After displayUserName we don't use the function call <code>()</code> because this would run the function as soon as the page was loaded.</p>

        <p>On the second part that we call the button, we are using a function expression. The function is not it self called upon the page loads because the code is declaring a function.</p>

        <p>Then you may think... If I need an argument to pass the function, how will I do it, since the <code>()</code> will call it? For this, you can declare an <em>anonymous function</em> inside the event listener and then call the other function with the arguments you need. Let's take a look:</p>

        <code><pre>
  const cTextBtn = document.querySelector('#change-text-btn');
  const changeText = (text) => {
    text.innerHTML === 'Help!' ? text.innerHTML = 'Thanks!' : text.innerHTML = 'Help!';
  }
  cTextBtn.addEventListener('click', function() { changeText(this) });
        </pre></code>

        <p>Now the last line is adding the event listener and also passing a function that calls for another function with arguments passed. If you want to pass something else, like an <code>e</code> for event, and also another argument, you do like this:</p>

        <code><pre>
  const changeText = (e,text) => { <em>Do Something</em> }
  something.addEventListener('click', function(e){ changeText(this) });
        </pre></code>

        <p>This button is running the above function to change it's text. Click it to see.</p>

        <button id="change-text-btn" class="primary-btn">Help!</button>

        <p>To see more events in action, take a look at the <a href="./mouse-tracker/mouse-tracker.html">mouse-tracker</a> that the instructor did.</p>
      </section>

      <section id="loops">
        <h3>Some simple DOM loops.</h3>
        <p>Below we will use a simple function to display the text of all the links with have on this page that <em>start</em> with <code>http</code>. Press the button to display them.</p>

        <button id="displayLinks" class="primary-btn">Display links</button>

        <ul id="link-list"></ul>

        <p>Code available on <strong>dom-loops.js</strong>.</p>
      </section>

    </article>
  </main>
  <script src="dom-methods.js"></script>
  <script src="dom-tests.js"></script>
  <script src="dom-loops.js"></script>
</body>
</html>